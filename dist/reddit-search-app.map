{"version":3,"sources":["reddit.api.js","index.js"],"names":["search","term","limit","sortBy","fetch","then","res","json","data","children","map","catch","err","console","error","searchForm","document","getElementById","searchInput","addEventListener","event","querySelector","value","searchLimit","searchTerm","showMessage","results","output","forEach","post","image","preview","images","source","url","title","truncateString","selftext","score","subreddit","innerHTML","preventDefault","msg","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","myString","shortened","indexOf","substring"],"mappings":"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","file":"reddit-search-app.map","sourcesContent":["export default {\r\n   search: (term, limit, sortBy) => {\r\n      return fetch(`http://www.reddit.com/search.json?q=${term}&sort=${sortBy}&limit=${limit}`)\r\n         .then(res => res.json())\r\n         .then(data => data.data.children.map(data => data.data))\r\n         .catch(err => console.error(err));\r\n   }\r\n}","import reddit from './reddit.api';\r\n\r\nconst searchForm = document.getElementById('search-form');\r\nconst searchInput = document.getElementById('search-input');\r\n\r\n// Submit del Form\r\nsearchForm.addEventListener('submit', event => {\r\n   // Obtener el ordenamiento\r\n   const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\r\n   // Obtener el limite\r\n   const searchLimit = document.getElementById('limit').value;\r\n   // Obtener los términos de busqueda\r\n   const searchTerm = searchInput.value;\r\n\r\n   // Validar el término de busqueda\r\n   if (searchTerm === '') {\r\n      // Si esta vacio muestra el msj de error\r\n      showMessage('Debe ingresar un término de búsqueda', 'alert-danger');\r\n   }\r\n\r\n   // Limpiar el input\r\n   searchInput.value = '';\r\n\r\n   // Buscar en reddit\r\n   reddit.search(searchTerm, searchLimit, sortBy)\r\n      .then(results => {\r\n         let output = '<div class=\"card-columns\">';\r\n         results.forEach(post => {\r\n            // Validar la img\r\n            let image = post.preview ? post.preview.images[0].source.url : 'https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg';\r\n            output += `\r\n                     <div class=\"card mb-2\">\r\n                        <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\r\n                        <div class=\"card-body\">\r\n                           <h4 class=\"card-title\">${post.title}</h4>\r\n                           <p class=\"card-text\">${truncateString(post.selftext, 100)}</p>\r\n                           <a href=\"${post.url}\" target=\"_blank\" class=\"btn btn-primary\">Leer más</a>\r\n                        <hr>\r\n                        <span class=\"badge badge-dark\">Score: ${post.score}</span>\r\n                        <span class=\"badge badge-secondary\">Subreddit: ${post.subreddit}</span> \r\n                        </div>\r\n                     </div>\r\n        `;\r\n         });\r\n         output += '</div>';\r\n         document.getElementById('results').innerHTML = output;\r\n      });\r\n\r\n   event.preventDefault();\r\n\r\n});\r\n\r\n// Mostrar mensaje\r\nfunction showMessage(msg, className) {\r\n   // Crear el div\r\n   const div = document.createElement('div');\r\n   // Agregar las clases de css\r\n   div.className = `alert ${className}`;\r\n   // Agregar el texto\r\n   div.appendChild(document.createTextNode(msg));\r\n   // Obtener el contenedor padre\r\n   const searchContainer = document.getElementById('search-container');\r\n   // Obtener el elemento anterior\r\n   const search = document.getElementById('search');\r\n\r\n   // Insertar el div con la alerta\r\n   searchContainer.insertBefore(div, search);\r\n\r\n   // El timeout para que la alerta se vaya\r\n   setTimeout(() => document.querySelector('.alert').remove(), 3000);\r\n}\r\n\r\n// Truncar string\r\nfunction truncateString(myString, limit) {\r\n   const shortened = myString.indexOf(' ', limit);\r\n   if (shortened == -1) return myString;\r\n   return myString.substring(0, shortened);\r\n}"]}